plugins {
    id 'java'
    id "org.jetbrains.kotlin.jvm" version "1.3.71"
}

group 'ro.qatools'
version '1.0'

sourceCompatibility = 11

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.jetbrains.kotlin:kotlin-stdlib'

    testImplementation(
        'org.junit.jupiter:junit-jupiter-api:5.6.0-M1',

        // RestAssured
        'io.rest-assured:rest-assured:4.3.0',
        'io.rest-assured:json-path:4.3.0',
        'io.rest-assured:xml-path:4.3.0',
        'io.rest-assured:json-schema-validator:4.3.0',
        // kotlin
        'io.rest-assured:kotlin-extensions:4.3.0')

    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.6.0-M1'
}

kotlin {
    sourceSets {
        main.kotlin.srcDirs += 'src/main/kotlin'
    }
}

/***** TEST ****/
test {
    useJUnitPlatform()
}

task slowTest(type: Test) {
    useJUnitPlatform {
        includeTags 'slow'
    }
}

task fastTest(type: Test) {
    useJUnitPlatform {
        excludeTags 'slow'
    }
}

subprojects {
    tasks.withType(Test) {
        maxParallelForks = Runtime.runtime.availableProcessors()
    }
}